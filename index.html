<!-- auth.html -->
<!doctype html>
<html lang="hy">
<head>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‘≥÷Ä’°’∂÷Å’∏÷Ç’¥ / ’Ñ’∏÷Ç’ø÷Ñ</title>
  <style>
    :root { --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --muted:#94a3b8; color-scheme: dark; }
    body { margin:0; font-family:Inter, Arial, sans-serif; background: linear-gradient(180deg,#071024 0%, #04132a 100%); display:flex; align-items:center; justify-content:center; height:100vh; }
    .card { width: 360px; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); border-radius:16px; padding:24px; box-shadow: 0 10px 30px rgba(2,6,23,0.6); color:#e6eef6; }
    h1 { font-size:20px; margin:0 0 12px 0; }
    label { display:block; margin-top:10px; font-size:13px; color:var(--muted); }
    input { width:100%; padding:10px 12px; margin-top:6px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:rgba(255,255,255,0.02); color:inherit; outline:none; }
    .row { display:flex; gap:8px; margin-top:12px; }
    button { flex:1; padding:10px 12px; border-radius:10px; border:none; cursor:pointer; font-weight:600; }
    .btn-primary { background:linear-gradient(90deg,var(--accent), #0891b2); color:#021826; }
    .btn-ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); }
    .msg { margin-top:12px; font-size:14px; min-height:18px; }
    .success { color:#8be5c9; }
    .error { color:#ff8b8b; }
    .small { font-size:12px; color:var(--muted); margin-top:8px; text-align:center; }
  </style>
</head>
<body>
  <div class="card" role="main">
    <h1 id="title">‘≥÷Ä’°’∂÷Å’∏÷Ç’¥</h1>

    <label for="email">‘∑’¨‚Ä§ ÷É’∏’Ω’ø</label>
    <input id="email" type="email" placeholder="you@example.com" autocomplete="email">

    <label for="password">‘≥’°’≤’ø’∂’°’¢’°’º</label>
    <input id="password" type="password" placeholder="’Å’•÷Ä ’£’°’≤’ø’∂’°’¢’°’º’®">

    <div class="row">
      <button id="submitBtn" class="btn-primary">‘≥÷Ä’°’∂÷Å’æ’•’¨</button>
      <button id="toggleBtn" class="btn-ghost">’Ñ’∏÷Ç’ø÷Ñ</button>
    </div>

    <div class="msg" id="msg"></div>
    <div class="small">’Ü’∑’∏÷Ç’¥’ù ’±’•÷Ä ’ø’æ’µ’°’¨’∂’•÷Ä’® ’°’∫’°’∞’∏’æ ’±’•÷Ç’∏’æ ’Ø’∏÷Ç’≤’°÷Ä’Ø’æ’•’∂ ’¢–æ—Ç—É’ù ’∫’°’ø÷Ä’°’Ω’ø’æ’°’Æ hashing-’∏’æ÷â</div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand(); // ’ø’°÷Ä’°’Æ’•’¨ iframe-’® ’•’©’• ’Ø’°÷Ä’•’¨’´ ’ß

    let mode = "register";
    const emailEl = document.getElementById("email");
    const passEl = document.getElementById("password");
    const submitBtn = document.getElementById("submitBtn");
    const toggleBtn = document.getElementById("toggleBtn");
    const titleEl = document.getElementById("title");
    const msgEl = document.getElementById("msg");

    function setMsg(text, cls){
      msgEl.textContent = text;
      msgEl.className = "msg " + (cls||"");
    }

    toggleBtn.addEventListener("click", () => {
      if(mode === "register"){
        mode = "login";
        titleEl.textContent = "’Ñ’∏÷Ç’ø÷Ñ";
        submitBtn.textContent = "’Ñ’∏÷Ç’ø÷Ñ";
        toggleBtn.textContent = "‘≥÷Ä’°’∂÷Å’∏÷Ç’¥";
        setMsg("");
      } else {
        mode = "register";
        titleEl.textContent = "‘≥÷Ä’°’∂÷Å’∏÷Ç’¥";
        submitBtn.textContent = "‘≥÷Ä’°’∂÷Å’æ’•’¨";
        toggleBtn.textContent = "’Ñ’∏÷Ç’ø÷Ñ";
        setMsg("");
      }
    });

    submitBtn.addEventListener("click", () => {
      const email = emailEl.value.trim();
      const password = passEl.value;

      if(!email || !password){
        setMsg("‘º÷Ä’°÷Å÷Ä’•÷Ñ ’¢’∏’¨’∏÷Ä ’§’°’∑’ø’•÷Ä’®", "error");
        return;
      }

      // ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’¢’∏’ø’´’∂
      const payload = { action: mode, email, password };
      try {
        tg.sendData(JSON.stringify(payload));
        setMsg(mode === "register" ? "‚úÖ ‘≥÷Ä’°’∂÷Å’¥’°’∂ ’ø’æ’µ’°’¨’∂’•÷Ä’® ’∏÷Ç’≤’°÷Ä’Ø’æ’∏÷Ç’¥ ’•’∂..." : "üîë ’Ñ’∏÷Ç’ø÷Ñ’´ ’ø’æ’µ’°’¨’∂’•÷Ä’® ’∏÷Ç’≤’°÷Ä’Ø’æ’∏÷Ç’¥ ’•’∂...", "success");
        // ’∞’∂’°÷Ä’°’æ’∏÷Ä ’ß ÷Å’∏÷Ç’µ÷Å ’ø’°’¨, ’∏÷Ä ’Ω’∫’°’Ω’∏÷Ç’¥ ’•’Ω ’±’°’µ’∂’´’∂
      } catch (e) {
        setMsg("‚ùå ‘±’º’°’ª’°÷Å’°’æ ’≠’∂’§’´÷Ä ’ø’æ’µ’°’¨’∂’•÷Ä’´ ’∏÷Ç’≤’°÷Ä’Ø’¥’°’∂ ’™’°’¥’°’∂’°’Ø", "error");
      }
      // ’π’∂’•÷Ä’§’∂’•’¨ ’∂’∏÷Ä ’ø’æ’µ’°’¨’∂’•÷Ä
      passEl.value = "";
    });
  </script>
</body>
</html>
