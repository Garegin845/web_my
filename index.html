<!-- ...existing code... -->
<script>
const tg = window.Telegram?.WebApp || {sendData:()=>console.log("No Telegram, data:", arguments)};
let mode="register";

// Telegram WebApp initialization
if (tg.initData) {
    tg.expand(); // maximize WebApp window
}

document.getElementById("switchBtn").addEventListener("click", ()=>{
    mode=mode==="register"?"login":"register";
    document.getElementById("formTitle").textContent=mode==="register"?"Ô³Ö€Õ¡Õ¶ÖÕ¸Ö‚Õ´":"Õ„Õ¸Ö‚Õ¿Ö„";
    document.getElementById("submitBtn").textContent=mode==="register"?"Ô³Ö€Õ¡Õ¶ÖÕ¾Õ¥Õ¬":"Õ„Õ¸Ö‚Õ¿Ö„";
    document.getElementById("switchBtn").textContent=mode==="register"?"Õ„Õ¸Ö‚Õ¿Ö„":"Ô³Ö€Õ¡Õ¶ÖÕ¸Ö‚Õ´";
    document.getElementById("successMessage").textContent="";
    document.getElementById("errorMessage").textContent="";
});

document.getElementById("authForm").addEventListener("submit", e=>{
    e.preventDefault();
    const username=document.getElementById("username").value.trim();
    const password=document.getElementById("password").value;
    if(!username||!password){
        document.getElementById("errorMessage").textContent="Ô¼Ö€Õ¡ÖÖ€Õ¸Ö‚ Õ¢Õ¸Õ¬Õ¸Ö€ Õ¤Õ¡Õ·Õ¿Õ¥Ö€Õ¨";
        return;
    }
    tg.sendData(JSON.stringify({action:mode,username,password}));
    document.getElementById("successMessage").textContent=mode==="register"?"âœ… Ô³Ö€Õ¡Õ¶ÖÕ¾Õ¥ÖÕ«Ö€!":"ðŸ”‘ Õ„Õ¸Ö‚Õ¿Ö„ Õ¸Ö‚Õ²Õ¡Ö€Õ¯Õ¾Õ¡Õ®!";
    document.getElementById("errorMessage").textContent="";
    e.target.reset();
    // Optional: Close WebApp after submit
    if (tg.close) setTimeout(()=>tg.close(), 1200);
});
</script>
<!-- ...existing code... -->