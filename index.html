<!-- ...existing code... -->
<script>
const tg = window.Telegram?.WebApp || {sendData:()=>console.log("No Telegram, data:", arguments)};
let mode="register";

// Telegram WebApp initialization
if (tg.initData) {
    tg.expand(); // maximize WebApp window
}

document.getElementById("switchBtn").addEventListener("click", ()=>{
    mode=mode==="register"?"login":"register";
    document.getElementById("formTitle").textContent=mode==="register"?"Գրանցում":"Մուտք";
    document.getElementById("submitBtn").textContent=mode==="register"?"Գրանցվել":"Մուտք";
    document.getElementById("switchBtn").textContent=mode==="register"?"Մուտք":"Գրանցում";
    document.getElementById("successMessage").textContent="";
    document.getElementById("errorMessage").textContent="";
});

document.getElementById("authForm").addEventListener("submit", e=>{
    e.preventDefault();
    const username=document.getElementById("username").value.trim();
    const password=document.getElementById("password").value;
    if(!username||!password){
        document.getElementById("errorMessage").textContent="Լրացրու բոլոր դաշտերը";
        return;
    }
    tg.sendData(JSON.stringify({action:mode,username,password}));
    document.getElementById("successMessage").textContent=mode==="register"?"✅ Գրանցվեցիր!":"🔑 Մուտք ուղարկված!";
    document.getElementById("errorMessage").textContent="";
    e.target.reset();
    // Optional: Close WebApp after submit
    if (tg.close) setTimeout(()=>tg.close(), 1200);
});
</script>
<!-- ...existing code... -->